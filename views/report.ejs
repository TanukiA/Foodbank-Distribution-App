<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/20ddbdf3e1.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/report.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>
    
    <h1 id="title">Report</h1>
    <hr id="hr-out">
   
    <div id="report-box">

        <div class="report-table" >
            <a href="/report"><button class="report-btn report-btn-full">Regenerate Report</button></a>
            <div class="report-title">ChilliSos Food Bank's Report</div>
            <hr class="break">
            <div class="numberLabel">
                <label class="foodbankCount">Number of Food Bank: <%=foodbank.length%> </label>
            </div>
            <table class="table table-bordered align-middle" id="table">
                <tr>
                    <th rowspan=2>No.</th>
                    <th rowspan=2>Food Bank Name</th>
                    <th rowspan=2>Location</th>
                    <th rowspan=2>Contact</th>
                    <th rowspan=2>Open Time</th>
                    <th rowspan=2>Close Time</th>
                    <th rowspan=2>Halal</th>
                    <th colspan=3>Food</th>
                </tr>  
                <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Qty.</th>
                </tr>
                
                <% for(let i=0; i < foodbank.length; i++){ %>
                    
                    <% if(food[i].length === 0){%>
                        <tr>
                            <td rowspan = 1 style="text-align: center;">  <%=i+1%> </td>
                            <td rowspan = 1 ><%=foodbank[i].foodbank_name%></td>
                            <td rowspan = 1 ><%=location[i].location_address%></td>
                            <td rowspan = 1 style="text-align: center;"><%=foodbank[i].foodbank_contact%></td>
                            <td rowspan = 1 style="text-align: center;"><%=openTime[i]%></td>
                            <td rowspan = 1 style="text-align: center;"><%=closeTime[i]%></td>
                            <td rowspan = 1 style="text-align: center;"><%=foodbank[i].foodbank_food_halal%></td>
                            
                            <td style="text-align: center;">-</td>  
                            <td style="text-align: center;">-</td>  
                            <td style="text-align: center;">-</td>     
                        </tr>
                    <%}%>
                    
                    <% for(let j=0; j < food[i].length ; j++){ %>
                        
                        <% if(j===0){%>
                            <tr>
                                <td rowspan = "<%=food[i].length%>" style="text-align: center;">  <%=i+1%> </td>
                                <td rowspan = "<%=food[i].length%>" ><%=foodbank[i].foodbank_name%></td>
                                <td rowspan = "<%=food[i].length%>" ><%=location[i].location_address%></td>
                                <td rowspan = "<%=food[i].length%>" style="text-align: center;"><%=foodbank[i].foodbank_contact%></td>
                                <td rowspan = "<%=food[i].length%>" style="text-align: center;"><%=openTime[i]%></td>
                                <td rowspan = "<%=food[i].length%>" style="text-align: center;"><%=closeTime[i]%></td>
                                <td rowspan = "<%=food[i].length%>" style="text-align: center;"><%=foodbank[i].foodbank_food_halal%></td>
                                
                                <td><%=food[i][j].food_name%></td>  
                                <td style="text-align: center;"><%=food[i][j].food_category%></td>  
                                <td style="text-align: center;"><%=food[i][j].food_quantity%></td>     
                            </tr>
                        
                            
        
                        <%}else{%>
                            <tr>
                                <td><%=food[i][j].food_name%></td>  
                                <td style="text-align: center;"><%=food[i][j].food_category%></td>  
                                <td style="text-align: center;"><%=food[i][j].food_quantity%></td> 
                            </tr>
                            
                        <%}%>
                <% }
                } %>
            
            </table>
        </div>
        

    </div>
    
</body>
</html>
